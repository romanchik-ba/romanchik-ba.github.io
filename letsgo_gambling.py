import random
import re

# —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –≤–≤–æ–¥ —Ü–µ–ª—ã–º —á–∏—Å–ª–æ–º
def is_integer(s: str) -> bool:
    pattern = r'^[+-]?\d+$'
    return bool(re.match(pattern, s))

# –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å—Ç–∞–≤–∫—É –Ω–µ –º–µ–Ω–µ–µ 500
while True:
    user_input = input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à—É —Å—Ç–∞–≤–∫—É (–Ω–µ –º–µ–Ω–µ–µ 500): ")
    
    if is_integer(user_input):
        money = int(user_input)
        if money >= 500:
            break
        else:
            print("–°—Ç–∞–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 500!")
    else:
        print("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–≤–æ–¥! –í–≤–µ–¥–∏—Ç–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ.")
        
bet = money
symbols = [' üçí ', ' üîî ', ' 7Ô∏è‚É£ ']     # –°–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Å–ª–æ—Ç–æ–≤
# –°–ª—É—á–∞–π–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–ªe–º–µ–Ω—Ç–æ–≤ –∏–∑ —Å–ø–∏—Å–∫–∞ symbols –≤ —Å–ø–∏—Å–æ–∫ result
result = random.choices(symbols, k=3) 

# –ü–µ—Ä–≤–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è
if len(result) == 3 and result[0] == result[1] == result[2]: # –ï—Å–ª–∏ –≤—Å–µ 3 —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞ result –æ–¥–∏–Ω–∞–∫–æ–≤—ã, —Ç–æ
    print(*result)
    win = max(1, int(bet * 0.10)) # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—É–º–º—É –≤—ã–∏–≥—Ä—ã—à–∞ (10% –æ—Ç bet)
    bet += win                          # –ü—Ä–∏–±–∞–≤–ª—è–µ–º —Å—É–º–º—É –≤—ã–∏–≥—Ä—ã—à–∞ –≤ bet
    print(f'–í–∞—à –±–∞–ª–∞–Ω—Å: {int(bet)}')
    print(f"–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ {int(win)}. –ù–æ –í—ã —Å–µ—Ä—å–µ–∑–Ω–æ –Ω–∞ —ç—Ç–æ–º –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ—Å—å?")
else:
    print(*result)
    loss = max(1, int(bet * 0.20)) # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—É–º–º—É –ø—Ä–æ–∏–≥—Ä—ã—à–∞ (20% –æ—Ç bet)
    bet -= loss                         # –í—ã—á–∏—Ç–∞–µ–º —Å—É–º–º—É –ø—Ä–æ–∏–≥—Ä—ã—à–∞ –∏–∑ bet
    print(f'–í–∞—à –±–∞–ª–∞–Ω—Å: {int(bet)}')
    print(f"–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ {int(loss)}. –í—ã —Å–µ—Ä—å–µ–∑–Ω–æ –Ω–∞ —ç—Ç–æ–º –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ—Å—å?")

# –î–∞–ª–µ–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ü–∏–∫–ª
while bet >= 1:  # –¶–∏–∫–ª —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–∫–∞ –±–∞–ª–∞–Ω—Å ‚â• 1
    choice = input("–í–≤–µ–¥–∏—Ç–µ '+' —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É –∏–ª–∏ '-' —á—Ç–æ–±—ã –≤—ã–π—Ç–∏: ")
    
    if choice == '-':
        print("–í—ã —Ä–µ—à–∏–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è. –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.")
        break
    elif choice == '+':
        
        # –ó–¥–µ—Å—å –ø–æ–≤—Ç–æ—Ä—è–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π –±–ª–æ–∫
        result = (random.choices(symbols) + random.choices(symbols) + random.choices(symbols))
        
        if len(result) == 3 and result[0] == result[1] == result[2]: # –ï—Å–ª–∏ –≤—Å–µ 3 —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞ result –æ–¥–∏–Ω–∞–∫–æ–≤—ã, —Ç–æ
            print(*result)
            win = max(1, int(bet * 0.20))  # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—É–º–º—É –≤—ã–∏–≥—Ä—ã—à–∞ (10% –æ—Ç bet)
            bet += win                  # –ü—Ä–∏–±–∞–≤–ª—è–µ–º —Å—É–º–º—É –≤—ã–∏–≥—Ä—ã—à–∞ –≤ bet
            print(f'–í–∞—à –±–∞–ª–∞–Ω—Å: {int(bet)}')
            print(f"–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ {int(win)}. –ù–æ –í—ã —Å–µ—Ä—å–µ–∑–Ω–æ –Ω–∞ —ç—Ç–æ–º –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ—Å—å?")
        else:
            print(*result)
            loss = max(1, int(bet * 0.20)) # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—É–º–º—É –ø—Ä–æ–∏–≥—Ä—ã—à–∞ (20% –æ—Ç bet)
            bet -= loss                 # –í—ã—á–∏—Ç–∞–µ–º —Å—É–º–º—É –ø—Ä–æ–∏–≥—Ä—ã—à–∞ –∏–∑ bet
            print(f'–í–∞—à –±–∞–ª–∞–Ω—Å: {int(bet)}')
            print(f"–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ {int(loss)}. –í—ã —Å–µ—Ä—å–µ–∑–Ω–æ –Ω–∞ —ç—Ç–æ–º –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ—Å—å?") 
        if bet <= 0:
            print("–í–∞—à –±–∞–ª–∞–Ω—Å –æ–±–Ω—É–ª–∏–ª—Å—è. –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.")
            break
    else:
        print("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–≤–æ–¥. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ '+' –∏–ª–∏ '-'.")
